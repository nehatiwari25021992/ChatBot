var AppWarp;!function(e){var t=function(){function e(e,t){this.json=JSON.parse(t),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRoomIds=function(){var e=this.json.ids,t=e.split(";");return t.length>0&&t.pop(),t},e}();e.AllRoomsEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(t,o){this.servers=new Array,this.result=t;var s=JSON.parse(o);for(var n in s){var r=new e.Address(s[n].address.host,s[n].address.port),i=s[n].details,a=new Array;for(var u in i)a.push(new e.Zone(i[u].name,u));this.servers.push(new e.Server(r,a))}}return t.prototype.getResult=function(){return this.result},t.prototype.getServers=function(){return this.servers},t}();e.AllServerEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){this.json=JSON.parse(t),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getUsernames=function(){var e=this.json.names,t=e.split(";");return t.length>0&&t.pop(),t},e}();e.AllUsersEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e){this.json=JSON.parse(e)}return e.prototype.getChat=function(){return this.json.chat},e.prototype.getSender=function(){return this.json.sender},e.prototype.getLocId=function(){return this.json.id},e.prototype.getIsLocationLobby=function(){return this.json.isLobby?!0:!1},e}();e.Chat=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){!function(e){e[e.Auth=1]="Auth",e[e.JoinLobby=2]="JoinLobby",e[e.SubscribeLobby=3]="SubscribeLobby",e[e.UnsubscribeLobby=4]="UnsubscribeLobby",e[e.LeaveLobby=5]="LeaveLobby",e[e.CreateRoom=6]="CreateRoom",e[e.JoinRoom=7]="JoinRoom",e[e.SubscribeRoom=8]="SubscribeRoom",e[e.UnsubscribeRoom=9]="UnsubscribeRoom",e[e.LeaveRoom=10]="LeaveRoom",e[e.DeleteRoom=11]="DeleteRoom",e[e.Chat=12]="Chat",e[e.UpdatePeers=13]="UpdatePeers",e[e.Signout=14]="Signout",e[e.CreateZone=15]="CreateZone",e[e.DeleteZone=16]="DeleteZone",e[e.GetRooms=17]="GetRooms",e[e.GetUsers=18]="GetUsers",e[e.GetUserInfo=19]="GetUserInfo",e[e.GetRoomInfo=20]="GetRoomInfo",e[e.SetCustomRoomData=21]="SetCustomRoomData",e[e.SetCustomUserData=22]="SetCustomUserData",e[e.GetLobbyInfo=23]="GetLobbyInfo",e[e.JoinRoomWithNUser=24]="JoinRoomWithNUser",e[e.UpdateRoomProperty=25]="UpdateRoomProperty",e[e.JoinRoomWithProperties=27]="JoinRoomWithProperties",e[e.GetRoomWithNUser=28]="GetRoomWithNUser",e[e.GetRoomWithProperties=29]="GetRoomWithProperties",e[e.JoinRoomInRange=37]="JoinRoomInRange",e[e.GetRoomInRange=38]="GetRoomInRange",e[e.LockProperties=35]="LockProperties",e[e.UnlockProperties=36]="UnlockProperties",e[e.RPC=62]="RPC",e[e.KeepAlive=63]="KeepAlive",e[e.AssocPort=64]="AssocPort",e[e.AssocPortAck=65]="AssocPortAck",e[e.PrivateChat=30]="PrivateChat",e[e.Move=31]="Move",e[e.StartGame=66]="StartGame",e[e.StopGame=67]="StopGame",e[e.GetMoveHistory=68]="GetMoveHistory",e[e.ZoneRPC=69]="ZoneRPC",e[e.RoomRPC=70]="RoomRPC",e[e.GetAllServers=1]="GetAllServers",e[e.MasterAuth=2]="MasterAuth",e[e.ClientCustomMessage=3]="ClientCustomMessage",e[e.MasterSignout=4]="MasterSignout"}(e.RequestType||(e.RequestType={}));e.RequestType;!function(e){e[e.FlatString=0]="FlatString",e[e.Binary=1]="Binary",e[e.Json=2]="Json"}(e.PayloadType||(e.PayloadType={}));e.PayloadType;!function(e){e[e.Request=0]="Request",e[e.Response=1]="Response",e[e.Update=2]="Update"}(e.MessageType||(e.MessageType={}));e.MessageType;!function(e){e[e.Success=0]="Success",e[e.AuthError=1]="AuthError",e[e.ResourceNotFound=2]="ResourceNotFound",e[e.ResourceMoved=3]="ResourceMoved",e[e.BadRequest=4]="BadRequest",e[e.ConnectionError=5]="ConnectionError",e[e.UnknownError=6]="UnknownError",e[e.ResultSizeError=7]="ResultSizeError",e[e.SuccessRecovered=8]="SuccessRecovered",e[e.ConnectionErrorRecoverable=9]="ConnectionErrorRecoverable"}(e.ResultCode||(e.ResultCode={}));e.ResultCode;!function(e){e[e.RoomCreated=1]="RoomCreated",e[e.RoomDeleted=2]="RoomDeleted",e[e.UserJoinedLobby=3]="UserJoinedLobby",e[e.UserLeftLobby=4]="UserLeftLobby",e[e.UserJoinedRoom=5]="UserJoinedRoom",e[e.UserLeftRoom=6]="UserLeftRoom",e[e.UserOnline=7]="UserOnline",e[e.UserOffline=8]="UserOffline",e[e.Chat=9]="Chat",e[e.UpdatePeers=10]="UpdatePeers",e[e.RoomPropertyChange=11]="RoomPropertyChange",e[e.PrivateChat=12]="PrivateChat",e[e.MoveCompleted=13]="MoveCompleted",e[e.GameStarted=16]="GameStarted",e[e.GameStopped=17]="GameStopped",e[e.UserPaused=14]="UserPaused",e[e.UserResumed=15]="UserResumed",e[e.ClientCustomMessage=10]="ClientCustomMessage"}(e.UpdateType||(e.UpdateType={}));e.UpdateType;!function(e){e[e.MaxPropertySizeBytes=2048]="MaxPropertySizeBytes"}(e.Constants||(e.Constants={}));e.Constants}(AppWarp||(AppWarp={}));var AppWarp;!function(e){!function(e){e[e.onConnectDone=0]="onConnectDone",e[e.onDisconnectDone=1]="onDisconnectDone",e[e.onJoinLobbyDone=2]="onJoinLobbyDone",e[e.onLeaveLobbyDone=3]="onLeaveLobbyDone",e[e.onSubscribeLobbyDone=4]="onSubscribeLobbyDone",e[e.onUnsubscribeLobbyDone=5]="onUnsubscribeLobbyDone",e[e.onGetLiveLobbyInfoDone=6]="onGetLiveLobbyInfoDone",e[e.onSubscribeRoomDone=7]="onSubscribeRoomDone",e[e.onUnsubscribeRoomDone=8]="onUnsubscribeRoomDone",e[e.onJoinRoomDone=9]="onJoinRoomDone",e[e.onLeaveRoomDone=10]="onLeaveRoomDone",e[e.onGetLiveRoomInfoDone=11]="onGetLiveRoomInfoDone",e[e.onSetCustomRoomDataDone=12]="onSetCustomRoomDataDone",e[e.onUpdatePropertyDone=13]="onUpdatePropertyDone",e[e.onLockPropertiesDone=14]="onLockPropertiesDone",e[e.onUnlockPropertiesDone=15]="onUnlockPropertiesDone",e[e.onRoomRPCDone=16]="onRoomRPCDone",e[e.onCreateRoomDone=17]="onCreateRoomDone",e[e.onDeleteRoomDone=18]="onDeleteRoomDone",e[e.onGetAllRoomsDone=19]="onGetAllRoomsDone",e[e.onGetOnlineUsersDone=20]="onGetOnlineUsersDone",e[e.onGetLiveUserInfoDone=21]="onGetLiveUserInfoDone",e[e.onSetCustomUserDataDone=22]="onSetCustomUserDataDone",e[e.onGetMatchedRoomsDone=23]="onGetMatchedRoomsDone",e[e.onZoneRPCDone=24]="onZoneRPCDone",e[e.onRoomCreated=25]="onRoomCreated",e[e.onRoomDestroyed=26]="onRoomDestroyed",e[e.onUserLeftRoom=27]="onUserLeftRoom",e[e.onUserJoinedRoom=28]="onUserJoinedRoom",e[e.onUserLeftLobby=29]="onUserLeftLobby",e[e.onUserJoinedLobby=30]="onUserJoinedLobby",e[e.onChatReceived=31]="onChatReceived",e[e.onUpdatePeersReceived=32]="onUpdatePeersReceived",e[e.onUserChangeRoomProperty=33]="onUserChangeRoomProperty",e[e.onPrivateChatReceived=34]="onPrivateChatReceived",e[e.onMoveCompleted=35]="onMoveCompleted",e[e.onGameStarted=36]="onGameStarted",e[e.onGameStopped=37]="onGameStopped",e[e.onSendChatDone=38]="onSendChatDone",e[e.onSendPrivateChatDone=39]="onSendPrivateChatDone",e[e.onSendUpdateDone=40]="onSendUpdateDone",e[e.onSendMoveDone=41]="onSendMoveDone",e[e.onStartGameDone=42]="onStartGameDone",e[e.onStopGameDone=43]="onStopGameDone",e[e.onGetMoveHistoryDone=44]="onGetMoveHistoryDone"}(e.Events||(e.Events={}));e.Events;!function(e){e[e.onConnectDone=0]="onConnectDone",e[e.onDisconnectDone=1]="onDisconnectDone",e[e.onGetAllServerDone=2]="onGetAllServerDone",e[e.onCustomMessageReceived=3]="onCustomMessageReceived"}(e.MasterEvents||(e.MasterEvents={}));e.MasterEvents}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(e,t){this.json=JSON.parse(t),this.res=e}return t.prototype.getResult=function(){return this.res},t.prototype.getRoom=function(){return new e.Room(this.res,JSON.stringify(this.json))},t.prototype.getCustomData=function(){return this.json.data},t.prototype.getProperties=function(){return this.json.properties},t.prototype.getUsers=function(){var e=this.json.usernames,t=e.split(";");return t.length>0&&t.pop(),t},t}();e.LiveRoom=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){this.json=JSON.parse(t),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getName=function(){return this.json.name},e.prototype.getLocationId=function(){return this.json.locationId},e.prototype.getCustomData=function(){return this.json.custom},e.prototype.isLobby=function(){return this.json.isLobby?this.json.isLobby:!1},e}();e.LiveUser=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){this.json=JSON.parse(t),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getLobbyId=function(){return this.json.id},e.prototype.getOwner=function(){return this.json.owner},e.prototype.getName=function(){return this.json.name},e.prototype.getIsPrimary=function(){return this.json.isPrimary},e.prototype.getMaxUsers=function(){return this.json.maxUsers},e}();e.Lobby=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(){if(this.masterHost="",this.masterPort="",this.isConnected=!1,this.responseCallbacks=[],t.instance)throw new Error("Error: Instantiation failed: Use MasterClient.getInstance() instead of new.");t.instance=this}return t.initialize=function(e,o){t.getInstance().masterHost=e,t.getInstance().masterPort=o},t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.connect=function(){this.socket=new WebSocket("ws://"+this.masterHost+":"+this.masterPort),this.socket.binaryType="arraybuffer";var t=this;this.socket.onopen=function(){t.isConnected=!0,t.responseCallbacks[e.MasterEvents.onConnectDone]&&t.responseCallbacks[e.MasterEvents.onConnectDone](e.ResultCode.Success)},this.socket.onclose=function(){t.isConnected=!1,t.responseCallbacks[e.MasterEvents.onConnectDone]&&t.responseCallbacks[e.MasterEvents.onConnectDone](e.ResultCode.ConnectionError)},this.socket.onmessage=function(e){t.onMessage(e)}},t.prototype.disconnect=function(){var t=this;this.socket.onclose=function(){t.isConnected=!1,t.responseCallbacks[e.MasterEvents.onDisconnectDone]&&t.responseCallbacks[e.MasterEvents.onDisconnectDone](e.ResultCode.Success)},this.socket.close()},t.prototype.sendMessage=function(e){this.socket.send(e)},t.prototype.onMessage=function(t){for(var o=new Uint8Array(t.data),s=o.length,n=0;s>n;)if(o[n]==e.MessageType.Response){var r=new e.Response(o,n);n+=this.handleResponse(r)}else if(o[n]==e.MessageType.Update){var i=new e.Notify(o,n);n+=this.handleNotify(i)}},t.prototype.handleResponse=function(t){if(t.debug(),t.getRequestType()==e.RequestType.GetAllServers){var o=new e.AllServerEvent(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.MasterEvents.onGetAllServerDone]&&this.responseCallbacks[e.MasterEvents.onGetAllServerDone](o)}return 9+t.getPayloadSize()},t.prototype.handleNotify=function(t){return t.debug(),t.getUpdateType()==e.UpdateType.ClientCustomMessage&&this.responseCallbacks[e.MasterEvents.onCustomMessageReceived]&&this.responseCallbacks[e.MasterEvents.onCustomMessageReceived](t.getPayload()),8+t.getPayloadSize()},t.prototype.setListener=function(e,t){this.responseCallbacks[e]=t},t.prototype.getAllServers=function(){if(1==this.isConnected){var t=e.RequestBuilder.buildWarpRequest(0,e.RequestType.GetAllServers,"",!0,3);this.sendMessage(t.buffer)}},t.prototype.sendCustomMessage=function(t){if(1==this.isConnected){var o=e.RequestBuilder.buildWarpRequest(0,e.RequestType.ClientCustomMessage,t,!1,3);this.sendMessage(o.buffer)}},t.instance=null,t}();e.MasterClient=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){this.json=JSON.parse(t),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRooms=function(){var e=[],t=0;for(var o in this.json){var s={};s.id=o,s.name=this.json[o].name,s.owner=this.json[o].owner,s.maxUsers=this.json[o].maxUsers,e[t]=s,t++}return e},e}();e.MatchedRoomEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e){this.json=JSON.parse(e)}return e.prototype.getSender=function(){return this.json.sender},e.prototype.getNextTurn=function(){return this.json.nextTurn},e.prototype.getMoveData=function(){return this.json.moveData},e.prototype.getRoomId=function(){this.json.roomId},e}();e.Move=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(t,o){this.messageType=t[o+0],this.updateType=t[o+1],this.reserved=t[o+2],this.payLoadType=t[o+3],this.payLoadSize=e.Utility.bytesToIntger(t,o+4),this.payLoad=new Uint8Array(this.payLoadSize);for(var s=0;s<this.payLoadSize;s++)this.payLoad[s]=t[8+o+s]}return t.prototype.getMessageType=function(){return this.messageType},t.prototype.getUpdateType=function(){return this.updateType},t.prototype.getPayloadType=function(){return this.payLoadType},t.prototype.getPayloadSize=function(){return this.payLoadSize},t.prototype.getPayload=function(){return this.payLoad},t.prototype.getPayloadString=function(){return e.Utility.bin2String(this.payLoad)},t.prototype.debug=function(){console.log("=========Notify========="),console.log("messageType : "+e.MessageType[this.getMessageType()]),console.log("updateType  : "+e.UpdateType[this.getUpdateType()]),console.log("payLoadType : "+e.PayloadType[this.getPayloadType()]),console.log("payLoadSize : "+this.getPayloadSize()),console.log("payLoad     : "+this.getPayloadString())},t}();e.Notify=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(){}return t.buildWarpRequest=function(t,o,s,n,r){"undefined"==typeof r&&(r=0);var i=new Uint8Array(16+s.length);i[0]=e.MessageType.Request,i[1]=o,i[2]=t>>>24,i[3]=t>>>16,i[4]=t>>>8,i[5]=t;for(var a=6;9>=a;a++)i[a]=0;i[10]=r,s.length>0&&o!=e.RequestType.UpdatePeers?i[11]=e.PayloadType.Json:i[11]=e.PayloadType.Binary;var u=s.length;if(i[12]=u>>>24,i[13]=u>>>16,i[14]=u>>>8,i[15]=u,0==n)for(var a=0;u>a;++a)i[16+a]=s[a];else for(var a=0;u>a;++a)i[16+a]=s.charCodeAt(a);return i},t.buildAuthRequest=function(t,o,s,n){var r=e.Utility.getODataUTCDateFilter(),i={};return i.apiKey=o,i.version="JS_1.4",i.timeStamp=r,i.user=s,i.authData=n,i.keepalive=300,i.recoverytime=t,JSON.stringify(i)},t.buildLobbyRequest=function(){var e={};return e.isPrimary=!0,JSON.stringify(e)},t.buildChatRequest=function(e){if(e.length>=512)return"";var t={};return t.chat=e,JSON.stringify(t)},t.buildPrivateChatRequest=function(e,t){if(t.length>=512)return"";var o={};return o.to=e,o.chat=t,JSON.stringify(o)},t.buildRoomRequest=function(e){var t={};return t.id=e,JSON.stringify(t)},t.buildUserRequest=function(e){var t={};return t.name=e,JSON.stringify(t)},t.buildRoomInRangeRequest=function(e,t,o){var s={};return s.minUsers=e,s.maxUsers=t,s.maxPreferred=o,JSON.stringify(s)},t.buildRoomWithPropertiesRequest=function(e){var t={};return t.properties=e,JSON.stringify(t)},t.buildSetCustomRoomDataRequest=function(e,t){var o={};return o.id=e,o.data=t,JSON.stringify(o)},t.buildSetCustomUserDataRequest=function(e,t){var o={};return o.name=e,o.data=t,JSON.stringify(o)},t.buildUpdateRoomPropertiesRequest=function(e,t,o){"undefined"==typeof o&&(o=null);var s="";if(null!=o&&o.length>0)for(var n=0;n<o.length;++n)s+=n<o.length-1?o[n]+";":o[n];var r={};return r.id=e,r.addOrUpdate=t,r.remove=s,JSON.stringify(r)},t.buildLockPropertiesRequest=function(e){var t={};return t.lockProperties=e,JSON.stringify(t)},t.buildUnlockPropertiesRequest=function(e){var t="";if(e&&e.length>0)for(var o=0;o<e.length;++o)t+=o<e.length-1?e[o]+";":e[o];var s={};return s.unlockProperties=t,JSON.stringify(s)},t.buildCreateTurnRoomRequest=function(e,t,o,s,n){"undefined"==typeof s&&(s=null),"undefined"==typeof n&&(n=-1);var r={};return r.name=e,r.owner=t,r.maxUsers=o,null!=s&&(r.properties=s),n>=0&&(r.turnTime=n),JSON.stringify(r)},t.buildSendMoveRequest=function(e){var t={};return t.moveData=e,JSON.stringify(t)},t.buildGetMoveHistoryRequest=function(){var e={};return e.count=5,JSON.stringify(e)},t.buildZoneRPCRequest=function(e,t){var o={};return o["function"]=e,o.args=t,JSON.stringify(o)},t.buildRoomRPCRequest=function(e,t,o){var s={};return s["function"]=t,s.args=o,s.roomId=e,JSON.stringify(s)},t}();e.RequestBuilder=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(t,o){this.messageType=t[o+0],this.requestType=t[o+1],this.resultCode=t[o+2],this.reserved=t[o+3],this.payLoadType=t[o+4],this.payLoadSize=e.Utility.bytesToIntger(t,o+5),this.payLoad=new Uint8Array(this.payLoadSize);for(var s=0;s<this.payLoadSize;s++)this.payLoad[s]=t[9+o+s]}return t.prototype.getMessageType=function(){return this.messageType},t.prototype.getRequestType=function(){return this.requestType},t.prototype.getResultCode=function(){return this.resultCode},t.prototype.getPayloadType=function(){return this.payLoadType},t.prototype.getPayloadSize=function(){return this.payLoadSize},t.prototype.getPayload=function(){return this.payLoad},t.prototype.getPayloadString=function(){return e.Utility.bin2String(this.payLoad)},t.prototype.debug=function(){console.log("========Response========"),console.log("messageType : "+e.MessageType[this.getMessageType()]),console.log("requestType : "+e.RequestType[this.getRequestType()]),console.log("resultCode  : "+this.getResultCode()),console.log("payLoadType : "+e.PayloadType[this.getPayloadType()]),console.log("payLoadSize : "+this.getPayloadSize()),console.log("payLoad     : "+this.getPayloadString())},t}();e.Response=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){this.json=JSON.parse(t),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRoomId=function(){return this.json.id},e.prototype.getOwner=function(){return this.json.owner},e.prototype.getName=function(){return this.json.name},e.prototype.getMaxUsers=function(){return this.json.maxUsers},e}();e.Room=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){this.host=e,this.port=t}return e.prototype.getHost=function(){return this.host},e.prototype.getPort=function(){return this.port},e}();e.Address=t;var o=function(){function e(e,t){this.name=e,this.appKey=t}return e.prototype.getName=function(){return this.name},e.prototype.getAppKey=function(){return this.appKey},e}();e.Zone=o;var s=function(){function e(e,t){this.address=e,this.appKeys=t}return e.prototype.getAddress=function(){return this.address},e.prototype.getZones=function(){return this.appKeys},e}();e.Server=s}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(){}return e.getODataUTCDateFilter=function(){var e,t=new Date,o=(t.getUTCMonth()+1).toString();e=1==o.length?"0"+o:o;var s,n=t.getUTCDate().toString();s=1==n.length?"0"+n:n;var r="";return r+=t.getUTCFullYear()+"-",r+=e+"-",r+=s,r+="T"+t.getUTCHours()+":",r+=t.getUTCMinutes()+":",r+=t.getUTCSeconds()+".",r+=t.getUTCMilliseconds(),r+="Z"},e.hex2bin=function(e){for(var t=[],o=0;o<e.length-1;o+=2)t.push(parseInt(e.substr(o,2),16));return String.fromCharCode.apply(String,t)},e.base64_encode=function(e){var t,o,s,n,r,i,a,u,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,d=0,R="",c=[];if(!e)return e;do t=e.charCodeAt(l++),o=e.charCodeAt(l++),s=e.charCodeAt(l++),u=t<<16|o<<8|s,n=u>>18&63,r=u>>12&63,i=u>>6&63,a=63&u,c[d++]=p.charAt(n)+p.charAt(r)+p.charAt(i)+p.charAt(a);while(l<e.length);R=c.join("");var y=e.length%3;return(y?R.slice(0,y-3):R)+"===".slice(y||3)},e.bin2String=function(e){for(var t="",o=0;o<e.length;o++){var s=e[o];t+=String.fromCharCode(s)}return t},e.string2bin=function(e){for(var t=e.length,o=new Uint8Array(t),s=0;t>s;++s)o[s]=e.charCodeAt(s);return o},e.bytesToIntger=function(e,t){for(var o=0,s=0;4>s;s++)o=(o<<8)+(255&e[t+s]);return o},e}();e.Utility=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(){if(this.responseCallbacks=[],this.updateCallbacks=[],this.SessionID=0,this.isConnected=!1,this.timeout=0,this.userName="",this.authData="",this.recovering=!1,t.instance)throw new Error("Error: Instantiation failed: Use WarpClient.getInstance() instead of new.");t.instance=this,setInterval(function(){if(1==this.AppWarp.WarpClient.instance.isConnected){var t=(new Date).getTime(),o=t-this.AppWarp.WarpClient.instance.timeout;if(o>2e3){var s=this.AppWarp.RequestBuilder.buildWarpRequest(this.AppWarp.WarpClient.instance.SessionID,e.RequestType.KeepAlive,"",!0);this.AppWarp.WarpClient.instance.sendMessage(s.buffer)}}},500)}return t.initialize=function(e,o,s,n){t.apiKey=e,t.serverAddress=o,t.serverPort=s||"12346",t.useSSL=n||!1},t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.sendMessage=function(e){this.socket.send(e),this.timeout=(new Date).getTime()},t.prototype.onMessage=function(t){for(var o=new Uint8Array(t.data),s=o.length,n=0;s>n;)if(o[n]==e.MessageType.Response){var r=new e.Response(o,n);n+=this.handleResponse(r)}else if(o[n]==e.MessageType.Update){var i=new e.Notify(o,n);n+=this.handleNotify(i)}},t.prototype.handleResponse=function(t){if(t.getRequestType()==e.RequestType.Auth){var o=t.getResultCode();if(t.getResultCode()==e.ResultCode.Success){var s=JSON.parse(t.getPayloadString());this.SessionID=s.sessionid,this.isConnected=!0,1==this.recovering&&(o=e.ResultCode.SuccessRecovered,this.recovering=!1)}else this.isConnected=!1,this.SessionID=0;this.responseCallbacks[e.Events.onConnectDone]&&this.responseCallbacks[e.Events.onConnectDone](o)}else if(t.getRequestType()==e.RequestType.JoinLobby){var n=new e.Lobby(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onJoinLobbyDone]&&this.responseCallbacks[e.Events.onJoinLobbyDone](n)}else if(t.getRequestType()==e.RequestType.SubscribeLobby){var n=new e.Lobby(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onSubscribeLobbyDone]&&this.responseCallbacks[e.Events.onSubscribeLobbyDone](n)}else if(t.getRequestType()==e.RequestType.UnsubscribeLobby){var n=new e.Lobby(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onUnsubscribeLobbyDone]&&this.responseCallbacks[e.Events.onUnsubscribeLobbyDone](n)}else if(t.getRequestType()==e.RequestType.LeaveLobby){var n=new e.Lobby(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onLeaveLobbyDone]&&this.responseCallbacks[e.Events.onLeaveLobbyDone](n)}else if(t.getRequestType()==e.RequestType.Chat)this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](t.getResultCode());else if(t.getRequestType()==e.RequestType.JoinRoom||t.getRequestType()==e.RequestType.JoinRoomInRange||t.getRequestType()==e.RequestType.JoinRoomWithProperties){var r=new e.Room(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](r)}else if(t.getRequestType()==e.RequestType.SubscribeRoom){var r=new e.Room(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onSubscribeRoomDone]&&this.responseCallbacks[e.Events.onSubscribeRoomDone](r)}else if(t.getRequestType()==e.RequestType.UnsubscribeRoom){var r=new e.Room(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onUnsubscribeRoomDone](r)}else if(t.getRequestType()==e.RequestType.LeaveRoom){var r=new e.Room(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onLeaveRoomDone]&&this.responseCallbacks[e.Events.onLeaveRoomDone](r)}else if(t.getRequestType()==e.RequestType.CreateRoom){var r=new e.Room(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onCreateRoomDone]&&this.responseCallbacks[e.Events.onCreateRoomDone](r)}else if(t.getRequestType()==e.RequestType.DeleteRoom){var r=new e.Room(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onDeleteRoomDone]&&this.responseCallbacks[e.Events.onDeleteRoomDone](r)}else if(t.getRequestType()==e.RequestType.GetRoomInfo){var i=new e.LiveRoom(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onGetLiveRoomInfoDone]&&this.responseCallbacks[e.Events.onGetLiveRoomInfoDone](i)}else if(t.getRequestType()==e.RequestType.GetLobbyInfo){var i=new e.LiveRoom(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone]&&this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone](i)}else if(t.getRequestType()==e.RequestType.GetUserInfo){var a=new e.LiveUser(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onGetLiveUserInfoDone]&&this.responseCallbacks[e.Events.onGetLiveUserInfoDone](a)}else if(t.getRequestType()==e.RequestType.SetCustomUserData){var a=new e.LiveUser(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onSetCustomUserDataDone]&&this.responseCallbacks[e.Events.onSetCustomUserDataDone](a)}else if(t.getRequestType()==e.RequestType.SetCustomRoomData){var i=new e.LiveRoom(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onSetCustomRoomDataDone]&&this.responseCallbacks[e.Events.onSetCustomRoomDataDone](i)}else if(t.getRequestType()==e.RequestType.GetUsers){var u=new e.AllUsersEvent(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onGetOnlineUsersDone]&&this.responseCallbacks[e.Events.onGetOnlineUsersDone](u)}else if(t.getRequestType()==e.RequestType.GetRooms){var p=new e.AllRoomsEvent(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onGetAllRoomsDone]&&this.responseCallbacks[e.Events.onGetAllRoomsDone](p)}else if(t.getRequestType()==e.RequestType.GetRoomInRange||t.getRequestType()==e.RequestType.GetRoomWithProperties){var l=new e.MatchedRoomEvent(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](l)}else if(t.getRequestType()==e.RequestType.UpdatePeers)this.responseCallbacks[e.Events.onSendUpdateDone]&&this.responseCallbacks[e.Events.onSendUpdateDone](t.getResultCode());else if(t.getRequestType()==e.RequestType.PrivateChat)this.responseCallbacks[e.Events.onSendPrivateChatDone]&&this.responseCallbacks[e.Events.onSendPrivateChatDone](t.getResultCode());else if(t.getRequestType()==e.RequestType.UpdateRoomProperty){var i=new e.LiveRoom(t.getResultCode(),t.getPayloadString());this.responseCallbacks[e.Events.onUpdatePropertyDone]&&this.responseCallbacks[e.Events.onUpdatePropertyDone](i)}else if(t.getRequestType()==e.RequestType.LockProperties)this.responseCallbacks[e.Events.onLockPropertiesDone]&&this.responseCallbacks[e.Events.onLockPropertiesDone](t.getResultCode());else if(t.getRequestType()==e.RequestType.UnlockProperties)this.responseCallbacks[e.Events.onUnlockPropertiesDone]&&this.responseCallbacks[e.Events.onUnlockPropertiesDone](t.getResultCode());else if(t.getRequestType()==e.RequestType.Move)this.responseCallbacks[e.Events.onSendMoveDone]&&this.responseCallbacks[e.Events.onSendMoveDone](t.getResultCode());else if(t.getRequestType()==e.RequestType.StartGame)this.responseCallbacks[e.Events.onStartGameDone]&&this.responseCallbacks[e.Events.onStartGameDone](t.getResultCode());else if(t.getRequestType()==e.RequestType.StopGame)this.responseCallbacks[e.Events.onStopGameDone]&&this.responseCallbacks[e.Events.onStopGameDone](t.getResultCode());else if(t.getRequestType()==e.RequestType.GetMoveHistory){if(this.responseCallbacks[e.Events.onGetMoveHistoryDone]){for(var d=JSON.parse(t.getPayloadString()),R=[],c=0;c<d.history.length;++c)R[c]=new e.Move(JSON.stringify(d.history[c]));this.responseCallbacks[e.Events.onGetMoveHistoryDone](t.getResultCode(),R)}}else if(t.getRequestType()==e.RequestType.ZoneRPC){if(console.log(t.getResultCode(),t.getPayloadString()),this.responseCallbacks[e.Events.onZoneRPCDone])if(0==t.getResultCode()){var y=JSON.parse(t.getPayloadString());this.responseCallbacks[e.Events.onZoneRPCDone](t.getResultCode(),y)}else this.responseCallbacks[e.Events.onZoneRPCDone](t.getResultCode(),"")}else if(t.getRequestType()==e.RequestType.RoomRPC&&(console.log(t.getResultCode(),t.getPayloadString()),this.responseCallbacks[e.Events.onRoomRPCDone]))if(0==t.getResultCode()){var y=JSON.parse(t.getPayloadString());this.responseCallbacks[e.Events.onRoomRPCDone](t.getResultCode(),y)}else this.responseCallbacks[e.Events.onRoomRPCDone](t.getResultCode(),"");return 9+t.getPayloadSize()},t.prototype.handleNotify=function(t){if(t.getUpdateType()==e.UpdateType.Chat){var o=new e.Chat(t.getPayloadString());this.updateCallbacks[e.Events.onChatReceived]&&this.updateCallbacks[e.Events.onChatReceived](o)}else if(t.getUpdateType()==e.UpdateType.RoomCreated){var s=new e.Room(0,t.getPayloadString());this.updateCallbacks[e.Events.onRoomCreated]&&this.updateCallbacks[e.Events.onRoomCreated](s)}else if(t.getUpdateType()==e.UpdateType.RoomDeleted){var s=new e.Room(0,t.getPayloadString());this.updateCallbacks[e.Events.onRoomDestroyed]&&this.updateCallbacks[e.Events.onRoomDestroyed](s)}else if(t.getUpdateType()==e.UpdateType.UpdatePeers)this.updateCallbacks[e.Events.onUpdatePeersReceived]&&this.updateCallbacks[e.Events.onUpdatePeersReceived](t.getPayload());else if(t.getUpdateType()==e.UpdateType.UserJoinedLobby){var n=new e.Lobby(0,t.getPayloadString()),r=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserJoinedLobby]&&this.updateCallbacks[e.Events.onUserJoinedLobby](n,r)}else if(t.getUpdateType()==e.UpdateType.UserLeftLobby){var n=new e.Lobby(0,t.getPayloadString()),r=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserLeftLobby]&&this.updateCallbacks[e.Events.onUserLeftLobby](n,r)}else if(t.getUpdateType()==e.UpdateType.UserJoinedRoom){var s=new e.Room(0,t.getPayloadString()),r=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserJoinedRoom]&&this.updateCallbacks[e.Events.onUserJoinedRoom](s,r)}else if(t.getUpdateType()==e.UpdateType.UserLeftRoom){var s=new e.Room(0,t.getPayloadString()),r=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserLeftRoom]&&this.updateCallbacks[e.Events.onUserLeftRoom](s,r)}else if(t.getUpdateType()==e.UpdateType.PrivateChat){var i=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onPrivateChatReceived]&&this.updateCallbacks[e.Events.onPrivateChatReceived](i.sender,i.chat)}else if(t.getUpdateType()==e.UpdateType.RoomPropertyChange){var i=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onUserChangeRoomProperty]&&this.updateCallbacks[e.Events.onUserChangeRoomProperty](i.sender,i.properties,i.lockProperties)}else if(t.getUpdateType()==e.UpdateType.MoveCompleted){var a=new e.Move(t.getPayloadString());this.updateCallbacks[e.Events.onMoveCompleted]&&this.updateCallbacks[e.Events.onMoveCompleted](a)}else if(t.getUpdateType()==e.UpdateType.GameStarted){if(this.updateCallbacks[e.Events.onGameStarted]){var i=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onGameStarted](i.sender,i.id,i.nextTurn)}}else if(t.getUpdateType()==e.UpdateType.GameStopped&&this.updateCallbacks[e.Events.onGameStopped]){var i=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onGameStopped](i.sender,i.id)}return 8+t.getPayloadSize()},t.prototype.joinZone=function(o,s){var n=e.RequestBuilder.buildAuthRequest(t.recoveryAllowance,t.apiKey,o,s),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Auth,n,!0);this.sendMessage(r.buffer)},t.prototype.setResponseListener=function(e,t){this.responseCallbacks[e]=t},t.prototype.resetResponseListener=function(e){this.responseCallbacks[e]&&delete this.responseCallbacks[e]},t.prototype.setNotifyListener=function(e,t){this.updateCallbacks[e]=t},t.prototype.resetNotifyListener=function(e){this.updateCallbacks[e]&&delete this.updateCallbacks[e]},t.prototype.connect=function(o,s){this.userName=o,this.authData=s,1==t.useSSL?this.socket=new WebSocket("wss://"+t.serverAddress+":"+t.serverPort):this.socket=new WebSocket("ws://"+t.serverAddress+":"+t.serverPort),this.socket.binaryType="arraybuffer";var n=this;this.socket.onopen=function(){o?n.joinZone(o,s):n.responseCallbacks[e.Events.onConnectDone]&&n.responseCallbacks[e.Events.onConnectDone](e.ResultCode.BadRequest)},this.socket.onclose=function(){n.isConnected=!1,t.recoveryAllowance>0&&0!=n.SessionID?(n.recovering=!0,n.responseCallbacks[e.Events.onConnectDone]&&n.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionErrorRecoverable)):0==n.recovering&&(n.SessionID=0,
n.responseCallbacks[e.Events.onConnectDone]&&n.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError))},this.socket.onmessage=function(e){n.onMessage(e)}},t.prototype.disconnect=function(){if(1!=this.isConnected)return void(this.responseCallbacks[e.Events.onDisconnectDone]&&this.responseCallbacks[e.Events.onDisconnectDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Signout,"",!0);this.sendMessage(t.buffer),this.SessionID=0,this.isConnected=!1},t.prototype.joinLobby=function(){var t=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinLobby,t,!0);this.sendMessage(o.buffer)},t.prototype.subscribeLobby=function(){var t=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SubscribeLobby,t,!0);this.sendMessage(o.buffer)},t.prototype.unsubscribeLobby=function(){var t=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnsubscribeLobby,t,!0);this.sendMessage(o.buffer)},t.prototype.leaveLobby=function(){var t=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LeaveLobby,t,!0);this.sendMessage(o.buffer)},t.prototype.joinRoom=function(t){var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.joinRoomInRange=function(t,o,s){var n=e.RequestBuilder.buildRoomInRangeRequest(t,o,s),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoomInRange,n,!0);this.sendMessage(r.buffer)},t.prototype.joinRoomWithProperties=function(t){var o=e.RequestBuilder.buildRoomWithPropertiesRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoomWithProperties,o,!0);this.sendMessage(s.buffer)},t.prototype.subscribeRoom=function(t){var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SubscribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.unsubscribeRoom=function(t){var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnsubscribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.leaveRoom=function(t){var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LeaveRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.createRoom=function(t,o,s,n){"undefined"==typeof n&&(n=null);var r={};if(r.name=t,r.owner=o,r.maxUsers=s,null!=n){if(JSON.stringify(n).length>e.Constants.MaxPropertySizeBytes){if(this.responseCallbacks[e.Events.onCreateRoomDone]){var i=new e.Room(e.ResultCode.ResultSizeError,"");this.responseCallbacks[e.Events.onCreateRoomDone](i)}return}r.properties=n}var a=JSON.stringify(r),u=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.CreateRoom,a,!0);this.sendMessage(u.buffer)},t.prototype.deleteRoom=function(t){var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.DeleteRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.getLiveRoomInfo=function(t){var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomInfo,o,!0);this.sendMessage(s.buffer)},t.prototype.getLiveLobbyInfo=function(){var t=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetLobbyInfo,t,!0);this.sendMessage(o.buffer)},t.prototype.getLiveUserInfo=function(t){var o=e.RequestBuilder.buildUserRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetUserInfo,o,!0);this.sendMessage(s.buffer)},t.prototype.setCustomUserData=function(t,o){var s=e.RequestBuilder.buildSetCustomUserDataRequest(t,o),n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SetCustomUserData,s,!0);this.sendMessage(n.buffer)},t.prototype.setCustomRoomData=function(t,o){var s=e.RequestBuilder.buildSetCustomRoomDataRequest(t,o),n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SetCustomRoomData,s,!0);this.sendMessage(n.buffer)},t.prototype.getOnlineUsers=function(){var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetUsers,"",!0);this.sendMessage(t.buffer)},t.prototype.getAllRooms=function(){var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRooms,"",!0);this.sendMessage(t.buffer)},t.prototype.getRoomsInRange=function(t,o){var s=e.RequestBuilder.buildRoomInRangeRequest(t,o,!0),n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomInRange,s,!0);this.sendMessage(n.buffer)},t.prototype.getRoomsWithProperties=function(t){var o=e.RequestBuilder.buildRoomWithPropertiesRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomWithProperties,o,!0);this.sendMessage(s.buffer)},t.prototype.sendChat=function(t){var o=e.RequestBuilder.buildChatRequest(t);if(""==o)this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest);else{var s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Chat,o,!0);this.sendMessage(s.buffer)}},t.prototype.sendUpdatePeers=function(t){if(t.length>=512)this.responseCallbacks[e.Events.onSendUpdateDone]&&this.responseCallbacks[e.Events.onSendUpdateDone](e.ResultCode.BadRequest);else{var o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UpdatePeers,t,!1);this.sendMessage(o.buffer)}},t.prototype.sendPrivateChat=function(t,o){var s=e.RequestBuilder.buildPrivateChatRequest(t,o);if(""==s)this.responseCallbacks[e.Events.onSendPrivateChatDone]&&this.responseCallbacks[e.Events.onSendPrivateChatDone](e.ResultCode.BadRequest);else{var n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.PrivateChat,s,!0);this.sendMessage(n.buffer)}},t.prototype.updateRoomProperties=function(t,o,s){"undefined"==typeof s&&(s=null);var n=e.RequestBuilder.buildUpdateRoomPropertiesRequest(t,o,s),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UpdateRoomProperty,n,!0);this.sendMessage(r.buffer)},t.prototype.lockProperties=function(t){var o=e.RequestBuilder.buildLockPropertiesRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LockProperties,o,!0);this.sendMessage(s.buffer)},t.prototype.unlockProperties=function(t){var o=e.RequestBuilder.buildUnlockPropertiesRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnlockProperties,o,!0);this.sendMessage(s.buffer)},t.prototype.createTurnRoom=function(t,o,s,n,r){var i=e.RequestBuilder.buildCreateTurnRoomRequest(t,o,s,n,r),a=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.CreateRoom,i,!0);this.sendMessage(a.buffer)},t.prototype.sendMove=function(t){var o=e.RequestBuilder.buildSendMoveRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Move,o,!0);this.sendMessage(s.buffer)},t.prototype.startGame=function(){var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.StartGame,"",!0);this.sendMessage(t.buffer)},t.prototype.stopGame=function(){var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.StopGame,"",!0);this.sendMessage(t.buffer)},t.prototype.getMoveHistory=function(){var t=e.RequestBuilder.buildGetMoveHistoryRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetMoveHistory,t,!0);this.sendMessage(o.buffer)},t.prototype.invokeZoneRPC=function(t){for(var o=new Array,s=1;s<arguments.length;++s)o[s-1]=arguments[s];var n=e.RequestBuilder.buildZoneRPCRequest(t,o),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.ZoneRPC,n,!0);this.sendMessage(r.buffer)},t.prototype.invokeRoomRPC=function(t,o){for(var s=new Array,n=2;n<arguments.length;++n)s[n-2]=arguments[n];var r=e.RequestBuilder.buildRoomRPCRequest(t,o,s),i=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.RoomRPC,r,!0);this.sendMessage(i.buffer)},t.prototype.setRecoveryAllowance=function(e){t.recoveryAllowance=e},t.prototype.recoverConnection=function(){0==this.SessionID||1==this.isConnected||""==t.serverAddress?this.responseCallbacks[e.Events.onConnectDone]&&this.responseCallbacks[e.Events.onConnectDone](e.ResultCode.BadRequest):(this.recovering=!0,this.authData.recovering=!0,this.connect(this.userName,this.authData))},t.prototype.getSessionID=function(){return this.SessionID},t.prototype.recoverConnectionWithSessionID=function(e,t){this.SessionID=e,this.userName=t,this.recoverConnection()},t.instance=null,t.serverPort="12346",t.recoveryAllowance=0,t.useSSL=!1,t}();e.WarpClient=t}(AppWarp||(AppWarp={}));